{"ast":null,"code":"import axios from 'axios';\nimport { setUser } from '../reducers/userReducer';\nimport { setLoading } from '../reducers/loadingReducer'; // import { useState } from 'react';\n\nexport const login = () => {\n  return async dispatch => {\n    dispatch(setLoading(true));\n    const res = await axios.get('http://localhost:5000/api/auth/login');\n    const {\n      user\n    } = res.data;\n    const {\n      token\n    } = res.data;\n    dispatch(setUser(user));\n    localStorage.setItem('token', token);\n    dispatch(setLoading(false));\n  };\n};\nexport const auth = () => {\n  // const [loading, setLoading] = useState(true);\n  return async dispatch => {\n    // if(localStorage.getItem('token') != null) {\n    //     console.log('xui');\n    //     return;\n    // }\n    const res = await axios.get('http://localhost:5000/api/auth/check', {\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem('token')}`\n      }\n    });\n    const {\n      user,\n      token\n    } = res.data; // const {token} = res.data;\n\n    dispatch(setUser(user));\n    localStorage.setItem('token', token);\n  };\n};","map":{"version":3,"sources":["/Users/admin/Desktop/DataArt/CloudDrive/front/src/actions/user.js"],"names":["axios","setUser","setLoading","login","dispatch","res","get","user","data","token","localStorage","setItem","auth","headers","Authorization","getItem"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,yBAAxB;AACA,SAASC,UAAT,QAA2B,4BAA3B,C,CACA;;AAEA,OAAO,MAAMC,KAAK,GAAG,MAAM;AACvB,SAAO,MAAMC,QAAN,IAAkB;AACrBA,IAAAA,QAAQ,CAACF,UAAU,CAAC,IAAD,CAAX,CAAR;AACA,UAAMG,GAAG,GAAG,MAAML,KAAK,CAACM,GAAN,CAAU,sCAAV,CAAlB;AACA,UAAM;AAACC,MAAAA;AAAD,QAASF,GAAG,CAACG,IAAnB;AACA,UAAM;AAACC,MAAAA;AAAD,QAAUJ,GAAG,CAACG,IAApB;AACAJ,IAAAA,QAAQ,CAACH,OAAO,CAACM,IAAD,CAAR,CAAR;AACAG,IAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BF,KAA9B;AACAL,IAAAA,QAAQ,CAACF,UAAU,CAAC,KAAD,CAAX,CAAR;AACH,GARD;AASH,CAVM;AAYP,OAAO,MAAMU,IAAI,GAAG,MAAM;AACtB;AACA,SAAO,MAAMR,QAAN,IAAkB;AACrB;AACA;AACA;AACA;AACA,UAAMC,GAAG,GAAG,MAAML,KAAK,CAACM,GAAN,CAAU,sCAAV,EAAkD;AAChEO,MAAAA,OAAO,EAAE;AACLC,QAAAA,aAAa,EAAG,UAASJ,YAAY,CAACK,OAAb,CAAqB,OAArB,CAA8B;AADlD;AADuD,KAAlD,CAAlB;AAKA,UAAM;AAACR,MAAAA,IAAD;AAAOE,MAAAA;AAAP,QAAgBJ,GAAG,CAACG,IAA1B,CAVqB,CAWrB;;AACAJ,IAAAA,QAAQ,CAACH,OAAO,CAACM,IAAD,CAAR,CAAR;AACAG,IAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BF,KAA9B;AACH,GAdD;AAeH,CAjBM","sourcesContent":["import axios from 'axios';\nimport { setUser } from '../reducers/userReducer';\nimport { setLoading } from '../reducers/loadingReducer';\n// import { useState } from 'react';\n\nexport const login = () => {\n    return async dispatch => {\n        dispatch(setLoading(true));\n        const res = await axios.get('http://localhost:5000/api/auth/login');\n        const {user} = res.data;\n        const {token} = res.data;\n        dispatch(setUser(user));\n        localStorage.setItem('token', token);\n        dispatch(setLoading(false));\n    }\n}\n\nexport const auth = () => {\n    // const [loading, setLoading] = useState(true);\n    return async dispatch => {\n        // if(localStorage.getItem('token') != null) {\n        //     console.log('xui');\n        //     return;\n        // }\n        const res = await axios.get('http://localhost:5000/api/auth/check', {\n            headers: {\n                Authorization: `Bearer ${localStorage.getItem('token')}`\n            }\n        });\n        const {user, token} = res.data;\n        // const {token} = res.data;\n        dispatch(setUser(user));\n        localStorage.setItem('token', token);\n    }\n};"]},"metadata":{},"sourceType":"module"}